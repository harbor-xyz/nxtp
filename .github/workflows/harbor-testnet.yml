name: Harbor Testnet

on:
  workflow_run:
    workflows:
      - E2E Workflow for Connext
    types:
      - completed

jobs:
  testnet:
    name: harbor testnet
    if: github.event.workflow_run.event == 'push' && github.event.workflow_run.head_branch == 'main'
    runs-on: ubuntu-latest
    steps:
      - name: Check out code
        uses: actions/checkout@v2
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          ref: ${{ github.event.workflow_run.head_sha }}
    
      - name: Get Commit value
        id: commit
        uses: pr-mpt/actions-commit-hash@v2
        with:
          commit: "${{ github.event.workflow_run.head_sha }}"
          prefix: "sha-"
      
      - name: Echo tag name (sha-short)
        run: echo ${{ steps.commit.outputs.short }}

      - name: Echo workflow_run details
        run: |
          echo ${{ github.event.workflow_run.event }}
          echo ${{ github.event.workflow_run.conclusion }}
          echo ${{ github.event.workflow_run.head_branch }}


      

      
